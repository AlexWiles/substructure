[logging]
level = "debug"
format = "compact"

[event_store]
type = "sqlite"
path = "events.db"

[otel]
endpoint = "http://localhost:4317"
service_name = "substructure"

[secret_providers.env]
type = "env"

[llm_clients.openrouter]
type = "openai_compatible"
base_url = "https://openrouter.ai/api"
api_key = { provider = "env", key = "OPENROUTER_API_KEY" }

[agents.alex]
name = "alex"
description = """A helpful assistant named Alex"""
system_prompt = """You are a helpful assistant named Alex."""
llm = { client = "openrouter", model = "stepfun/step-3.5-flash:free" }
sub_agents = ["file-system"]

[agents.file-system]
name = "file-system"
description = "Explores the filesystem â€” reads files, lists directories, and searches for content. Returns a summary of findings."
system_prompt = """You are a filesystem research assistant. \
Use the filesystem tools to explore files and directories, then return a clear summary of what you found. \
Be concise and factual."""
llm = { client = "openrouter", model = "stepfun/step-3.5-flash:free" }

[[agents.file-system.mcp_servers]]
name = "filesystem"
transport.type = "stdio"
transport.command = "npx"
transport.args = ["-y", "@modelcontextprotocol/server-filesystem", "."]
